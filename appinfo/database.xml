<?xml version="1.0" encoding="UTF-8" ?>
<database>
	<name>*dbname*</name>
	<create>true</create>
	<overwrite>false</overwrite>
	<charset>utf8</charset>
	<!-- TABLE entities -->
	<table>
		<name>*dbprefix*ncounting_entities</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>name</name>
				<type>text</type>
				<length>255</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>settings</name>
				<type>clob</type>
			</field>
		</declaration>
	</table>
	<!-- TABLE acls -->
	<table>
		<name>*dbprefix*ncounting_acls</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>entity_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>recipient</name>
				<type>text</type>
				<length>66</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>permissions</name>
				<type>text</type>
				<length>255</length>
				<notnull>false</notnull>
			</field>
			<index>
				<name>ncounting_acl_entity</name>
				<field>
					<name>entity_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_acl_recipient</name>
				<field>
					<name>recipient</name>
				</field>
			</index>
		</declaration>
	</table>
	<!-- TABLE accounts -->
	<table>
		<name>*dbprefix*ncounting_accounts</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>entity_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>parent_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
			</field>
			<field>
				<name>code</name>
				<type>text</type>
				<length>31</length>
			</field>
			<field>
				<name>sign</name>
				<type>text</type>
				<length>1</length>
			</field>
			<field>
				<name>name</name>
				<type>text</type>
				<length>255</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>deleted</name>
				<type>boolean</type>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>hidden</name>
				<type>boolean</type>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>readonly</name>
				<type>boolean</type>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>settings</name>
				<type>clob</type>
			</field>
			<index>
				<name>ncounting_account_entity</name>
				<field>
					<name>entity_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_account_deleted</name>
				<field>
					<name>deleted</name>
				</field>
			</index>
			<index>
				<name>ncounting_account_hidden</name>
				<field>
					<name>hidden</name>
				</field>
			</index>
		</declaration>
	</table>
	<!-- TABLE transactions -->
	<table>
		<name>*dbprefix*ncounting_transactions</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>entity_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>booking_period_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>date</name>
				<type>date</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>name</name>
				<type>text</type>
				<length>255</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>created_by</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>last_edit_by</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>deleted</name>
				<type>boolean</type>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>readonly</name>
				<type>boolean</type>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>settings</name>
				<type>clob</type>
			</field>
			<index>
				<name>ncounting_transaction_entity</name>
				<field>
					<name>entity_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_transaction_booking_period</name>
				<field>
					<name>booking_period_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_transaction_created_by</name>
				<field>
					<name>created_by</name>
				</field>
			</index>
			<index>
				<name>ncounting_transaction_last_edit_by</name>
				<field>
					<name>last_edit_by</name>
				</field>
			</index>
			<index>
				<name>ncounting_transaction_deleted</name>
				<field>
					<name>deleted</name>
				</field>
			</index>
		</declaration>
	</table>
	<!-- TABLE transaction_parts -->
	<table>
		<name>*dbprefix*ncounting_transaction_parts</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>entity_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>transaction_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>account_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>date</name>
				<type>date</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>amount</name>
				<type>integer</type>
				<length>19</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>currency</name>
				<type>text</type>
				<length>31</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>details</name>
				<type>clob</type>
			</field>
			<index>
				<name>ncounting_tp_transaction</name>
				<field>
					<name>transaction_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_tp_entity</name>
				<field>
					<name>entity_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_tp_account</name>
				<field>
					<name>account_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_tp_currency</name>
				<field>
					<name>currency</name>
				</field>
			</index>
		</declaration>
	</table>
	<!-- TABLE projects -->
	<table>
		<name>*dbprefix*ncounting_projects</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>entity_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>balance_root_account_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>flow_root_account_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>name</name>
				<type>text</type>
				<length>255</length>
			</field>
			<field>
				<name>start</name>
				<type>date</type>
			</field>
			<field>
				<name>end</name>
				<type>date</type>
			</field>
			<field>
				<name>closed</name>
				<type>boolean</type>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>settings</name>
				<type>clob</type>
			</field>
			<index>
				<name>ncounting_project_entity</name>
				<field>
					<name>entity_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_project_closed</name>
				<field>
					<name>closed</name>
				</field>
			</index>
			<index>
				<name>ncounting_project_start</name>
				<field>
					<name>start</name>
				</field>
			</index>
			<index>
				<name>ncounting_project_end</name>
				<field>
					<name>end</name>
				</field>
			</index>
		</declaration>
	</table>
	<!-- TABLE portals -->
	<table>
		<name>*dbprefix*ncounting_portals</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>entity_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>project_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>ingoing_account_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>outgoing_account_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>end</name>
				<type>date</type>
			</field>
			<index>
				<name>ncounting_portal_entity</name>
				<field>
					<name>entity_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_portal_project</name>
				<field>
					<name>project_id</name>
				</field>
			</index>
			<index>
				<name>ncounting_portal_end</name>
				<field>
					<name>end</name>
				</field>
			</index>
		</declaration>
	</table>
</database>
